# TIL for 2024 12 13

## 12/13 今日やったこと

- アプリ改修


# オールナイトランテック！！イベント参加者募集中！

https://school.runteq.jp/v2/runteq_events/1243


### お便りも募集中！（マジで少なくて開催の危機まであるのでどうかよろしくお願いします :sob: ）

https://nanigaderukana.onrender.com/programs/10

お便りは↑のアプリ内で募集中！


---

### - アプリ改修

お便りとかお便り箱、番組説明とかの欄にマークダウン使えるようにしてみようということでやってみました。

記事コピペしただけなのでgemの理解は５割か６割ぐらい？コードの意味とかどんな風に書くとかいまいち把握できてないｗ

https://zenn.dev/airiswim/articles/a9d1cd145c4094

とりまこの記事のコピペすればすぐにマークダウン使えるようになりました。

同じように記事のコピペでコードブロック表示する場合のシンタックスハイライトを実装しようとしたらCSSあたらなくて、いろいろ調べたらなぜか別に分けてある_rouge.scss.erbが読み込めてなくて、原因いまいちわかんなかったんですけどSCSSのテンプレ？読み込んでただけで、erbでなんか呼び出してるけど要するに中身はSCSSだったので、呼び出してその内容をファイルに書き込んでSCSSファイルとして保存、それをapp/assets/stylesheets/application.bootstrap.scssに読み込ませるっていうごり押しで解決しました。

なんでerbに書いてたら読み込めなかったか調べないと・・・

```ruby
# config/initializers/rouge_theme.rb
require 'rouge'
require 'fileutils'

rouge_theme = Rouge::Themes::MonokaiSublime.render(scope: '.highlight')

# stylesheets ディレクトリにRougeのスタイルシートを作成
FileUtils.mkdir_p(Rails.root.join('app', 'assets', 'stylesheets'))
File.write(Rails.root.join('app', 'assets', 'stylesheets', '_rouge.scss'), rouge_theme)
```

これもAIに出してもらったから雰囲気でしか分からん・・・ｗ

initializers についても調べないとなぁよくわかってないからｗ

見た感じ（マジで何も調べてない）単純に起動したら実行するって感じっぽいけど。

いろいろやったら

[![Image from Gyazo](https://i.gyazo.com/9c83c2e827f3347730b85b6c4d5f687c.png)](https://gyazo.com/9c83c2e827f3347730b85b6c4d5f687c)

こんな感じになりました。


---

gemのこと調べてたらアンカーって単語が引っ掛かってどっかで見たことある気がするけど思い出せなかったので調べたら、「やりたかったけどJS必要そうでめんどくさそう＋そんなに重要でもなく放置してたこと」がきれいに解決できるものでしたｗ

[![Image from Gyazo](https://i.gyazo.com/5d7e568cb58b25398988d76dc69783a8.gif)](https://gyazo.com/5d7e568cb58b25398988d76dc69783a8)

見たらわかると思いますがリンクにアクセスしてページに到着したら指定した要素の「位置」に画面を持っていくって感じのやつです。

https://qiita.com/hellhellmymy/items/37ce7197c8f206715af2

JSいると思ってたけど

```ruby
<%= link_to program_path(@program, anchor: "letterForm"),  data: { turbo: false } %>
```

こんな感じで　anchor: "目的の要素のid"　って追加するだけでいけるのね。

Railsって便利ねぇ～ｗｗ


---

とりあえずマークダウンが使えるようになったんですがこのままだとスクリプト埋め込めたりよくないリンクでも埋め込めたりするので、XSS対策をしないといけません。

Railsに組み込まれてるsanitizeヘルパーメソッドを使ってサニタイズしてみたんですが（これもAI）。

[![Image from Gyazo](https://i.gyazo.com/b7b09d7280207e1e87beaa4f14c443af.png)](https://gyazo.com/b7b09d7280207e1e87beaa4f14c443af)

こうなりました。ｗ

続きは明日や！！ｗｗ


---

### やることメモ

- [ ] コードブロックとgyazoのマークダウンはサニタイズの対象外にする

- [ ] 削除ボタンを編集ページに移動（レイアウトはuserを参考にする）

- [ ] 暇があれば番組に対しても表示/非表示ボタン適用する

- [ ] レスポンシブをしっかり整える

- [ ] 今日できたこと、出来なかったこと調べたりまとめたり

- [ ] initializersのことも調べる


スマホからの見た目がほんとクソになってしまってて、こういうのでもお便り投稿しにくかったりしてるんかなと思ったんで結構優先度高めのとこにレスポンシブ整えるってのを入れときます。


---

ほんと頭働かなくてやたらAIにぶん投げて深掘りもあんまりできませんでしたね今日は。

公式とかいろんな記事見てやってること（内部ではなく設定の時に書いてるコードの意味）が５～６割ぐらいなんとなくわかったら記事コピペしてやってみる → デバック、バグ潰し → 調べて解決しなきゃ部分的にAI丸投げって感じではあるけど、AI頼りすぎなんですかねぇ。

解決したら公式見に行ったりAIに聞いたりして深掘りはするんですけど、GitHub見たり記事見たりするだけで何とかできるようにしたいなぁと。

ってかエンジニアやること多すぎじゃないですかねぇ！ｗ

SQL、アルゴリズム、インフラ、Docker、Git、Rails以外のフレームワークや言語の勉強などなど。やること膨大すぎる＆それぞれの学習フローが分かんなすぎるからどっかで整理しないとなぁ、だれか簡単にまとめてくれぇーｗ

時間足んねぇよ！

尊敬してるパイセンの卒制見てたら「○○やからこれを選んだ」「○○やからこうした」みたいなのがしっかりあって、自分が卒制にしようとしてるものがかなり適当やなって思ったし、こういうのは知ってないと出てこない部分やろうからそういう知識も収集しないとなあと、はぁぁぁ（クソでかため息）。

自走力ってのは結構自信あるけど知識面がボトルネックになってきてる気がするから書籍とかでちゃんと勉強するのも必要ですねぇ。

いい本とか教材探さないとorz

トリマ頑張ります、おやすみなさい。
